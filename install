#!/bin/bash

shellType="$1"

cd "$( dirname "$0" )" || exit 1
PATH_TO_CONF="$PWD"

CommonFiles=".systeminfo .screenrc .vimrc .tmux.conf"
bashFiles=".bash_profile .bashrc .bash_aliases .bash_logout .inputrc"
zshFiles=".zshrc .zsh_aliases"

function get-git-completion(){
    SHELL="$1"
    if [ ! -f "${HOME}/.git-completion.${SHELL}" ]; then
        curl -s --output "${HOME}/.git-completion.${SHELL}" \
            https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.${SHELL}
        chmod 644 "${HOME}/.git-completion.${SHELL}"
    fi
}



case "${shellType:-none}" in
    bash )
        rcFiles="$CommonFiles $bashFiles"
        get-git-completion bash
        ;;
    zsh )
        rcFiles="$CommonFiles $zshFiles"
        get-git-completion zsh
        ;;
    * )
        echo "type $0 bash|zsh"
        exit 0
        ;;
esac

for i in $rcFiles
do
    if [ -f "${PATH_TO_CONF}/dot$i" ]; then
        ln -fs "${PATH_TO_CONF}/dot$i" "$HOME/$i"
    fi
done

if [ -x /usr/bin/lesskey ]; then
    if [ -f "${PATH_TO_CONF}/dot.lesskey" ]; then
        ln -fs "${PATH_TO_CONF}/dot.lesskey" "$HOME/.lesskey"
        /usr/bin/lesskey
    fi
fi


# vim: set ts=4 sw=4 sts=0 et ft=sh fenc=utf-8 ff=unix :
